# 本地测试指南

## 🚀 快速开始

### 1. 启动测试工具

```bash
# 确保已安装依赖
pip install -r requirements.txt

# 运行测试工具
python test_chat.py
```

### 2. 开始对话

启动后会看到：

```
============================================================
🤖 在办小助手 - 命令行测试工具
============================================================
💡 提示：
  - 直接输入消息进行对话
  - 输入 'exit' 或 'quit' 退出
  - 输入 'clear' 清屏
  - 输入 'todos' 查看所有待办
  - 输入 'help' 查看帮助
============================================================

👤 您: 
```

## 📝 使用示例

### 创建待办

```
👤 您: 明天下午3点开会，记得带文件
🤖 助手: ✅ 已创建待办事项：明天下午3点开会
         备注：记得带文件

👤 您: 下周一交项目报告
🤖 助手: ✅ 已创建待办事项...
```

### 查看待办

```
👤 您: 查看待办
🤖 助手: 📋 您有2个待办事项：
         1. [1] 明天下午3点开会
         2. [2] 下周一交项目报告

# 或使用命令
👤 您: todos
📋 您的待办事项
============================================================
⏳ 未完成 (2)：
  [1] 明天下午3点开会
      📝 备注: 记得带文件
  [2] 下周一交项目报告
```

### 完成任务

```
👤 您: 完成任务1，会议很顺利
🤖 助手: 🎉 太棒了！已完成：明天下午3点开会
         感想已记录
```

### 任务规划

```
👤 您: 帮我规划今天的任务
🤖 助手: 根据您当前的任务，建议：
         1. 优先准备项目报告（截止日期临近）
         2. ...
```

### 更新任务

```
👤 您: 给任务2添加备注：需要准备PPT
🤖 助手: ✅ 已更新待办事项
```

### 删除任务

```
👤 您: 删除任务3
🤖 助手: ✅ 已删除待办事项
```

## 🎯 测试场景

### 场景1：基本功能测试

```
1. 创建3个待办
2. 查看列表
3. 完成其中一个
4. 再查看列表验证
```

### 场景2：Function Calling 测试

```
1. "明天要开会、写报告、回邮件"  → 测试批量创建
2. "查看待办"                   → 测试查询
3. "完成开会"                   → 测试模糊匹配
```

### 场景3：对话测试

```
1. "你好"
2. "你是什么模型？"
3. "你能做什么？"
```

### 场景4：任务规划测试

```
1. 创建多个不同优先级的任务
2. "帮我规划今天的任务"
3. 查看 AI 的建议
```

## 🔧 命令参考

| 命令 | 说明 |
|------|------|
| `todos` | 显示所有待办事项（包括已完成） |
| `help` | 显示帮助信息 |
| `clear` | 清屏 |
| `exit` / `quit` | 退出程序 |

## 🐛 调试技巧

### 查看详细日志

如果需要看到详细的函数调用过程，可以：

```bash
# 在代码中临时添加 print
# 或查看控制台输出的调试信息
```

### 查看数据库

```bash
# 使用 SQLite 工具查看数据库
sqlite3 instance/app.db

# 查看待办列表
SELECT * FROM todo_items;

# 查看用户
SELECT * FROM users;
```

### 重置测试数据

```bash
# 删除数据库重新开始
rm instance/app.db

# 重新运行测试工具会自动创建新数据库
python test_chat.py
```

## 📊 验证功能清单

- [ ] 创建待办事项
- [ ] 查询待办列表  
- [ ] 完成待办事项
- [ ] 删除待办事项
- [ ] 更新待办事项
- [ ] 添加备注
- [ ] 记录完成感想
- [ ] 任务规划建议
- [ ] 自然语言理解
- [ ] Function Calling 正常工作

## ⚠️ 注意事项

1. **环境变量**：确保 `.env` 文件配置正确，特别是 `LLM_API_KEY`
2. **数据库**：测试使用独立的数据库，不影响生产数据
3. **网络**：需要能访问大模型 API（如 DeepSeek）
4. **测试用户**：自动创建 `test_user_001` 作为测试用户

## 🎉 测试完成后

确认功能正常后，就可以：
1. 部署到服务器
2. 配置微信接入
3. 正式使用

---

祝测试愉快！🚀

